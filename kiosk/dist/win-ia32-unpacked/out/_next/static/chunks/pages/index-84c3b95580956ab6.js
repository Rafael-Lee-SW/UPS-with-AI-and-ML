(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(1364)}])},3923:function(e,t,o){"use strict";o.d(t,{Hg:function(){return c},t2:function(){return a}});var n=o(7066);let s="https://j11a302.p.ssafy.io/api";async function a(e){try{let t=(await n.Z.post("".concat(s,"/auths/devices/sign-in"),{deviceOtp:e})).data;if(!t.success)return{valid:!1,products:[],storeName:"",accessToken:""};{let e=t.result.accessToken,o=t.result.storeName,s=t.result.productResponseList||[];return console.log("Authorization Token:",e),localStorage.setItem("accessToken",e),n.Z.defaults.headers.common.Authorization="Bearer ".concat(e),localStorage.setItem("products",JSON.stringify(s)),localStorage.setItem("storeName",o),{valid:!0,products:s,storeName:o,accessToken:e}}}catch(e){return console.error("상품 조회 API 요청 실패:",e),{valid:!1,products:[],storeName:"",accessToken:""}}}async function c(e,t,o){try{let a=localStorage.getItem("accessToken");if(!a){console.error("No access token found. Please log in again.");return}console.log("Sending payment data to backend..."),console.log("Order ID:",e),console.log("Total Price:",t),console.log("Payed Products:",o),console.log("Authorization Token:",a);let c=await n.Z.post("".concat(s,"/payments"),{paymentCreateRequestList:o.map(e=>({barcode:e.barcode,productName:e.productName,quantity:e.quantity,sellingPrice:e.sellingPrice})),orderId:e,totalPrice:t},{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});console.log("Payment data sent successfully:",c.data)}catch(e){console.error("Failed to send payment data:",e)}}},1364:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return i}});var n=o(5893),s=o(7294),a=o(1163),c=o(3923),r=o(7186),l=o.n(r);function i(){let[e,t]=(0,s.useState)(""),[o,r]=(0,s.useState)(""),[i,u]=(0,s.useState)(""),d=(0,a.useRouter)(),p=async t=>{t.preventDefault();let o=e||i;if(!o){r("Invalid storeId or RFID data");return}let{valid:n,products:s,storeName:a}=await (0,c.t2)(o);n?(console.log("불러온 제품 리스트:",s),d.push({pathname:"/select",query:{products:JSON.stringify(s),storeName:a}})):r("Invalid storeId")};return(0,s.useEffect)(()=>{window.electronAPI&&window.electronAPI.onRFIDDetected(e=>{u(e),t(e)})},[]),(0,n.jsxs)("div",{className:l().container,children:[(0,n.jsx)("h1",{className:l().welcome,children:"환영합니다. 매장 KEY를 입력해주세요."}),(0,n.jsxs)("form",{className:l().form,onSubmit:p,children:[(0,n.jsx)("input",{type:"text",className:l().inputBox,value:e,onChange:e=>t(e.target.value),placeholder:"매장 키를 입력해주세요."}),(0,n.jsx)("button",{type:"submit",className:l().submitButton,children:"확인"})]}),o&&(0,n.jsx)("p",{style:{color:"red"},children:o}),i&&(0,n.jsxs)("p",{children:["RFID 감지됨: ",i]})]})}},7186:function(e){e.exports={container:"pages_container__DOwau",form:"pages_form___8sEr",inputBox:"pages_inputBox__FZx5X",submitButton:"pages_submitButton__8Jcl8",welcome:"pages_welcome__S_9eO"}}},function(e){e.O(0,[143,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);