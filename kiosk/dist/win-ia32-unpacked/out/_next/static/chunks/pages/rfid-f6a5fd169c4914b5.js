(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{2705:function(t,e,r){var n=r(5639).Symbol;t.exports=n},4239:function(t,e,r){var n=r(2705),i=r(9607),o=r(2333),c=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":c&&c in Object(t)?i(t):o(t)}},7561:function(t,e,r){var n=r(7990),i=/^\s+/;t.exports=function(t){return t?t.slice(0,n(t)+1).replace(i,""):t}},1957:function(t,e,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},9607:function(t,e,r){var n=r(2705),i=Object.prototype,o=i.hasOwnProperty,c=i.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),r=t[a];try{t[a]=void 0;var n=!0}catch(t){}var i=c.call(t);return n&&(e?t[a]=r:delete t[a]),i}},2333:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5639:function(t,e,r){var n=r(1957),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();t.exports=o},7990:function(t){var e=/\s/;t.exports=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}},3279:function(t,e,r){var n=r(3218),i=r(7771),o=r(4841),c=Math.max,a=Math.min;t.exports=function(t,e,r){var u,s,d,l,f,_,m=0,p=!1,v=!1,h=!0;if("function"!=typeof t)throw TypeError("Expected a function");function x(e){var r=u,n=s;return u=s=void 0,m=e,l=t.apply(n,r)}function y(t){var r=t-_,n=t-m;return void 0===_||r>=e||r<0||v&&n>=d}function g(){var t,r,n,o=i();if(y(o))return j(o);f=setTimeout(g,(t=o-_,r=o-m,n=e-t,v?a(n,d-r):n))}function j(t){return(f=void 0,h&&u)?x(t):(u=s=void 0,l)}function b(){var t,r=i(),n=y(r);if(u=arguments,s=this,_=r,n){if(void 0===f)return m=t=_,f=setTimeout(g,e),p?x(t):l;if(v)return clearTimeout(f),f=setTimeout(g,e),x(_)}return void 0===f&&(f=setTimeout(g,e)),l}return e=o(e)||0,n(r)&&(p=!!r.leading,d=(v="maxWait"in r)?c(o(r.maxWait)||0,e):d,h="trailing"in r?!!r.trailing:h),b.cancel=function(){void 0!==f&&clearTimeout(f),m=0,u=_=s=f=void 0},b.flush=function(){return void 0===f?l:j(i())},b}},3218:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},3448:function(t,e,r){var n=r(4239),i=r(7005);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==n(t)}},7771:function(t,e,r){var n=r(5639);t.exports=function(){return n.Date.now()}},4841:function(t,e,r){var n=r(7561),i=r(3218),o=r(3448),c=0/0,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,d=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return c;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=n(t);var r=u.test(t);return r||s.test(t)?d(t.slice(2),r?2:8):a.test(t)?c:+t}},7147:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rfid",function(){return r(7756)}])},7756:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return d}});var n=r(5893),i=r(7294),o=r(1163),c=r(3279),a=r.n(c),u=r(634),s=r.n(u);function d(){let t=(0,o.useRouter)(),[e,r]=(0,i.useState)([]),[c,u]=(0,i.useState)([]),[d,l]=(0,i.useState)(0),[f,_]=(0,i.useState)(0),[m,p]=(0,i.useState)(!1),[v,h]=(0,i.useState)(""),x=(0,i.useRef)(!1),y=t=>{if(x.current)return;x.current=!0;let r=e.find(e=>String(e.barcode)===String(t));r&&(u(t=>{let e=t.findIndex(t=>t.productId===r.productId);if(-1===e)return[...t,{...r,quantity:1}];{let r=[...t];return r[e]={...r[e],quantity:r[e].quantity+1},r}}),l(t=>t+(r.sellingPrice||0)),_(t=>t+1)),setTimeout(()=>{x.current=!1},300)},g=t=>{u(e=>e.reduce((e,r)=>(r.barcode===t?r.quantity>1&&e.push({...r,quantity:r.quantity-1}):e.push(r),e),[]));let r=e.find(e=>e.barcode===t);r&&(l(t=>t-(r.sellingPrice||0)),_(t=>t-1))};return(0,i.useEffect)(()=>{let t=localStorage.getItem("products"),e=localStorage.getItem("storeName");t&&r(JSON.parse(t)),e&&h(e)},[]),(0,i.useEffect)(()=>{let t=a()(t=>{x.current||y(t)},300),e=window.electronAPI.onRFIDDetected(e=>{t(e)});return()=>{e&&e()}},[e]),(0,n.jsxs)("div",{className:s().pageContainer,children:[(0,n.jsx)("header",{className:s().header,children:(0,n.jsx)("h2",{children:v})}),(0,n.jsx)("hr",{className:s().divider}),(0,n.jsxs)("div",{className:s().cartContainer,children:[(0,n.jsx)("img",{src:"/cart.gif",alt:"장바구니",className:s().cartImage}),(0,n.jsx)("p",{children:"상품을 바구니에 넣어주세요"})]}),(0,n.jsx)("div",{className:s().productsContainer,children:c.length>0?c.map((t,e)=>(0,n.jsxs)("div",{className:"".concat(s().product," ").concat(e%2==0?s().evenProduct:s().oddProduct),children:[(0,n.jsx)("img",{src:"/".concat(t.barcode,".jpg"),alt:t.productName,className:s().productImg}),(0,n.jsx)("label",{className:s().productName,children:t.productName}),(0,n.jsxs)("div",{className:s().quantity,children:[(0,n.jsx)("button",{onClick:()=>g(t.barcode),children:"−"}),(0,n.jsx)("label",{children:t.quantity}),(0,n.jsx)("button",{onClick:()=>y(t.barcode),children:"+"})]}),(0,n.jsxs)("label",{className:s().price,children:[new Intl.NumberFormat("ko-KR").format((t.sellingPrice||0)*t.quantity)," 원"]})]},t.productId)):(0,n.jsx)("div",{className:s().noProducts,children:"상품이 없습니다."})}),(0,n.jsxs)("div",{className:s().summaryFooter,children:[(0,n.jsx)("div",{className:s().summury,children:(0,n.jsxs)("div",{className:s().summaryRight,children:[(0,n.jsxs)("div",{className:s().totalQuantity,children:["총 수량: ",f,"개"]}),(0,n.jsxs)("div",{className:s().totalPrice,children:["총 결제금액: ",new Intl.NumberFormat("ko-KR").format(d),"원"]})]})}),(0,n.jsxs)("div",{className:s().checkoutFooter,children:[(0,n.jsx)("button",{onClick:()=>t.push("/select"),className:s().cancelBtn,children:"주문 취소"}),(0,n.jsx)("button",{onClick:()=>{let e=encodeURIComponent(JSON.stringify(c));t.push({pathname:"/payment/checkout",query:{scanedProducts:e,totalPrice:d}})},className:s().checkoutBtn,children:"결제하기"})]})]})]})}},634:function(t){t.exports={pageContainer:"rfid_pageContainer__y9xtu",label:"rfid_label__qxaxf",product:"rfid_product__TsDBn",slideUp:"rfid_slideUp__kEyE2",header:"rfid_header__Eyixc",divider:"rfid_divider__mtnjP",cartContainer:"rfid_cartContainer__vrmY6",fadeOut:"rfid_fadeOut__sa319",cartImage:"rfid_cartImage__DBCZH",body:"rfid_body__fQKz9",noProducts:"rfid_noProducts__gCWji",productsContainer:"rfid_productsContainer__35Nyj",evenProduct:"rfid_evenProduct___EQwW",oddProduct:"rfid_oddProduct__i_gAK",productImg:"rfid_productImg__sHn8e",quantity:"rfid_quantity__gbKB_",price:"rfid_price___949o",summaryFooter:"rfid_summaryFooter__xCY9C",summury:"rfid_summury__iH8Ie",totalQuantity:"rfid_totalQuantity__bzTXH",totalPrice:"rfid_totalPrice__L1uzE",checkoutFooter:"rfid_checkoutFooter__1Hd_5",cancelBtn:"rfid_cancelBtn__Je7Z4",checkoutBtn:"rfid_checkoutBtn__ZoWBn"}},1163:function(t,e,r){t.exports=r(9090)}},function(t){t.O(0,[888,774,179],function(){return t(t.s=7147)}),_N_E=t.O()}]);